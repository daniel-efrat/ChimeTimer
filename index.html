<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChimeTimer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="favicon.png">
</head>
<body>
    <div class="wrapper">
        <img src="logo.png" alt="">
        <div class="container">
            <h1>Interval Timer</h1>
            <div id="countdown">00:00</div>
            <div class="controls">
                <label for="intervalInput">Interval (minutes): </label>
                <input type="number" id="intervalInput" min="1" value="5">
            </div>
            <button id="startButton">Start</button>
            <button id="stopButton" disabled>Stop</button>
            <div class="volume-control">
                <label for="volumeSlider">Volume: </label>
                <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
            </div>
        </div>
    </div>
    <audio id="pingSound" src="ping.mp3" preload="auto"></audio>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const countdownElement = document.getElementById("countdown")
            const startButton = document.getElementById("startButton")
            const stopButton = document.getElementById("stopButton")
            const pingSound = document.getElementById("pingSound")
            const volumeSlider = document.getElementById("volumeSlider")
            const intervalInput = document.getElementById("intervalInput")

            let countdownInterval
            let timeLeft

            startButton.addEventListener("click", () => {
                timeLeft = parseInt(intervalInput.value) * 60
                startButton.disabled = true
                stopButton.disabled = false
                startCountdown()
                pingSound.play()
            })

            stopButton.addEventListener("click", () => {
                clearInterval(countdownInterval)
                timeLeft = parseInt(intervalInput.value) * 60
                updateCountdownDisplay()
                startButton.disabled = false
                stopButton.disabled = true
            })

            volumeSlider.addEventListener("input", () => {
                pingSound.volume = volumeSlider.value
            })

            function startCountdown() {
                countdownInterval = setInterval(() => {
                    if (timeLeft <= 0) {
                        clearInterval(countdownInterval)
                        pingSound.play()
                        timeLeft = parseInt(intervalInput.value) * 60 // reset timer
                        startCountdown() // start the countdown again
                    }
                    updateCountdownDisplay()
                    timeLeft--
                }, 1000)
            }

            function updateCountdownDisplay() {
                const minutes = Math.floor(timeLeft / 60)
                const seconds = timeLeft % 60
                countdownElement.textContent = `${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`
            }
        })
    </script>
</body>
</html>
